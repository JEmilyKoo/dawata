# WebRTC

## WebRTC?

- **Web Real-Time Communication**의 약자로 웹/앱에서 별다른 소프트웨어 없이
  카메라, 마이크 등을 사용하여 **실시간 커뮤니케이션을 제공해주는 기술**이다.
- 플러그인이나 추가 소프트웨어 없이 **브라우저만으로 통신이 가능**

## 사용하는 이유

- #### 시간 통신의 필요성
  - 빠르고 안정적인 통신이 필요한 환경에서 사용.
  - 화상 회의, 음성 통화, 실시간 채팅 등
  - 브라우저 간 직접 연결(Peer-to-Peer, P2P)을 통해 빠르고 지연 없는 통신 가능.
- #### 브라우저 기반 지원
  - 주요 브라우저에서 네이티브로 지원.
  - 플러그인 설치 없이 **웹 애플리케이션에서 바로 실시간 통신** 구현 가능.
- #### 비용 절감
  - 데이터 전송이 **브라우저 간 직접 연결**로 이루어지기 때문에 **서버 부하와 비용이 감소.**
  - 특히 대규모 사용자 환경에서 서버 사용량이 크게 줄어듦.
- #### 다양한 통신 유형 지원
  - **미디어 스트림 :** 오디오, 비디오 데이터 전송.
  - **데이터 채널 :** 파일 전송, 게임 데이터, 실시간 센서 데이터 등
- #### 표준 기반 기술
  - IETF와 W3C 표준에 기반하여 개발되었기 때문에 **장기적으로 안정적이고 호환 가능.**

## 장점

#### 1. 낮은 지연 시간 (Low Latency)

- **Peer-to-Peer(P2P) 통신 :** 중간 서버 없이 직접 데이터를 교환, 지연 시간이 적음.
- 게임, 화상 회의, 라이브 스트리밍 같은 **실시간 서비스에서 유용.**

#### 2. 플랫폼 독립성

- 브라우저와 모바일 모두 지원.
- 추가 소프트웨어 없이 HTML5 기반 애플리케이션으로 통신 구현 가능.

#### 3. 다양한 데이터 전송 지원

- 오디오와 비디오 외에 텍스트, 바이너리 데이터 등 **데이터 채널을 통해 다양한 데이터를 전송 가능.**
- **예:** 실시간 채팅, IoT 센서 데이터, 파일 전송 등.

#### 4. 비용 효율성

- 대부분의 데이터가 P2P로 전송되므로 **서버 부하와 비용이 줄어듦**.
- TURN 서버(중간 연결을 돕는 서버)를 사용할 때에도 비용이 제한적.

#### 5. 보안

- 데이터 전송 시 **DTLS(Secure Data Transport)** 와 **SRTP(Secure Real-Time Protocol)** 를 사용하여 강력한 보안 제공.
- 암호화된 연결로 사용자 프라이버시 보호.

#### 6. 유연성

- 오픈소스 기반으로 **커스터마이징 가능.**
- 다양한 언어와 프레임워크에서 **쉽게 연동 가능**(JavaScript, Python, Java 등).

#### 7. 실시간 미디어 처리

- 네트워크 상황에 따라 **비디오와 오디오 품질을 조정.**
- 예: 네트워크 대역폭이 낮아질 경우 자동으로 화질을 낮춰 통신 안정성을 유지.

## 단점

#### 1. 네트워크 환경 의존성

- Peer-to-Peer 연결이기 때문에 **NAT(Network Address Translation)와 방화벽 문제로 연결이 어려울 수 있음**.
- 이 문제를 해결하기 위해 **STUN/TURN 서버를 추가적으로 설정해야 함.**

#### 2. 복잡한 초기 설정

- WebRTC의 **시그널링(Signaling) 과정은 개발자가 별도로 구현** 해야 함. (표준화 X)
- **예:** WebSocket이나 HTTP를 사용하여 시그널링 서버 구축 필요.

#### 3. 확장성 문제

- P2P 기반이므로 **사용자 수가 증가할수록 대역폭과 성능 문제가 발생.**
- **SFU(Selective Forwarding Unit)** 나 **MCU(Multipoint Control Unit)**  
  같은 기술을 추가로 사용해야 대규모 사용자 환경에서 확장이 가능.

#### 4. 품질 관리 어려움

- 네트워크 품질에 따라 오디오와 비디오의 품질이 크게 달라질 수 있음.
- 패킷 손실, 지연, 대역폭 변동 등이 미디어 품질에 직접적인 영향을 미침.

#### 5. 브라우저 호환성

- 모든 브라우저에서 **완전히 동일한 방식으로 동작 X.**

#### 6. 서버 의존성

- P2P 통신이 주목적이지만, **연결 초기 과정(시그널링)에서는 여전히 서버가 필요.**
- NAT 방화벽 뒤에 있는 클라이언트를 연결하기 위해 TURN 서버를 사용하는 경우,
  서버 비용이 발생.

#### 7. 디버깅 어려움

- P2P 연결의 특성상, **네트워크 문제나 품질 저하의 원인을 디버깅하기 어려움.**
- 브라우저별 WebRTC 구현 방식이 다르기 때문에 문제 해결에 추가적인 시간이 필요.

#### 8. 실시간 통신 특화

- WebRTC는 실시간 통신을 위해 설계되었기 때문에, 대규모 데이터 저장이나 비실시간 처리는 적합하지 않음.

## 용어정리

#### 1. Peer-to-Peer(P2P)

> 브라우저 간 직접 데이터 통신을 제공, 낮은 지연과 높은 효율성.

#### 2. STUN/TURN

> NAT 문제를 해결하며, TURN은 P2P 연결 실패 시 릴레이 서버 역할.

#### 3. DTLS

> UDP 기반 암호화 프로토콜로 데이터 보안과 인증 제공.

#### 4. SRTP

> 오디오/비디오 스트림의 암호화와 데이터 무결성 보장.

#### 5. NAT

> 사설 네트워크를 공인 IP로 변환, P2P 연결 시 장애 요인.

#### 6. 시그널링

> 초기 연결 설정 및 미디어 정보 교환을 담당, WebRTC에는 포함되지 않으며 별도 구현 필요.

#### 7. SFU

> 멀티파티 통신에서 각 스트림을 필요한 클라이언트에만 전달하여 서버 부하를 최소화.

#### 8. MCU

> 모든 스트림을 믹싱하여 단일 스트림으로 전달, 클라이언트 부담 감소 대신 서버 부하 증가.
