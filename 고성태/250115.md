# Kurento

### 개념

1. **Kurento Media Server (KMS)**

   - Kurento의 핵심 컴포넌트
   - WebRTC 미디어 스트림을 처리하고 변환하는 역할
   - 다양한 미디어 처리 기능(녹화, 스트리밍, 변환, 필터링)을 제공.

2. **WebRTC 확장**

   - WebRTC에서 확장하여 서버 측 미디어 처리, 녹화, 방송, 회의 등의 기능을 제공.

3. **모듈형 아키텍처**:

   - 플러그인 시스템을 통해 추가 기능을 쉽게 통합할 수 있도록 설계.

4. **RESTful 및 WebSocket API**

   - 클라이언트와 KMS 간의 통신은 WebSocket을 사용.
   - REST API를 통해 다양한 제어를 수행 가능.

5. **멀티미디어 파이프라인**
   - 미디어 스트림을 처리하고 라우팅하기 위한 **"파이프라인" 아키텍처**를 제공.
   - 개발자는 이 파이프라인에 필터, 믹서, 분석기 등을 추가하여 다양한 기능을 구현 가능.

### **Kurento의 주요 기능**

1. **미디어 처리**:

   - 비디오 및 오디오 스트림을 실시간으로 분석, 변환, 조작.
   - 예: 비디오 회전, 해상도 변경, 오디오 볼륨 조절.

2. **녹화**:

   - WebRTC 스트림을 서버 측에서 녹화하여 저장.
   - 클라이언트 장치에 의존하지 않고 중앙 집중식 저장소에 저장 가능.

3. **미디어 믹싱**:

   - 여러 클라이언트의 오디오 및 비디오를 하나의 스트림으로 믹싱.
   - 예: 화상 회의에서 다수의 비디오를 하나의 화면에 표시.

4. **방송**:

   - WebRTC 스트림을 RTMP, HLS, MPEG-DASH 등 다른 프로토콜로 변환하여 스트리밍.

5. **필터 및 분석**:

   - 얼굴 인식, 모션 감지, 오디오 분석과 같은 고급 기능을 제공.
   - 개발자가 커스텀 플러그인을 만들어 특화된 미디어 처리 가능.

6. **멀티파티 통신**:

   - WebRTC는 주로 P2P 기반으로 설계되었지만, Kurento는 멀티파티 통신(회의, 세미나 등)을 쉽게 구현 가능.

7. **서버 측 미디어 라우팅**:
   - 클라이언트 간 직접 연결이 어려운 경우(Kurento를 통해 NAT 방화벽 우회) 미디어를 라우팅.

### **Why Kurento**

#### **1. 서버 기반 아키텍처**

- WebRTC
  - 기본적으로 P2P로 설계
  - 클라이언트 간 직접 연결이 어려운 경우 TURN 서버를 사용.
- Kurento
  - 서버 기반으로 미디어 스트림을 중앙에서 처리
  - 복잡한 네트워크 상황에서도 안정적인 연결을 제공.

#### **2. 멀티미디어 처리**

- WebRTC
  - 미디어를 단순히 전달하는 역할
- Kurento
  - 미디어를 실시간으로 처리하고 조작 가능능.
  - 스트림에 필터 적용, 텍스트 추가, 화질 변경.

#### **3. 녹화 기능**

- WebRTC
  - 기본적으로 녹화 기능을 제공 X.
- Kurento
  - 서버 측에서 스트림을 녹화하고 저장할 수 있는 강력한 기능을 내장.

#### **4. 멀티파티 통신**

- WebRTC
  - 멀티파티 통신을 구현하려면 MCU(Media Control Unit)나 SFU(Selective Forwarding Unit)가 필요.
- Kurento
  - 이 역할을 기본적으로 제공
  - 서버에서 스트림 믹싱과 라우팅을 관리.

#### **5. 방송 및 프로토콜 변환**

- WebRTC
  - 브라우저 간 통신에 최적화
- Kurento
  - WebRTC 스트림을 RTMP, HLS, MPEG-DASH 등 다른 형식으로 변환하여 방송 가능.

#### **6. 고급 미디어 분석 및 필터**

- Kurento
  - 얼굴 인식, 모션 감지, 오디오 분석과 같은 고급 미디어 분석 기능을 제공.
  - 개발자가 특정 비즈니스 로직에 맞는 커스텀 필터를 구현.

#### **7. 확장성과 관리 용이성**

- Kurento
  - 중앙 서버에서 모든 미디어를 처리하므로 대규모 사용자 관리가 용이.
- WebRTC
  - 클라이언트 간 직접 연결을 기본
  - 대규모 회의에서 연결 관리가 어려울 수 있음음.

### **Kurento의 한계**

1. **복잡성**

   - Kurento는 WebRTC보다 설정과 관리가 복잡.
   - 멀티미디어 파이프라인 설계와 플러그인 개발은 학습 곡선이 높음음.

2. **서버 의존성**

   - Kurento는 서버에 모든 미디어 처리를 맡기므로, 서버 부하가 커질 수 있음음.
   - 대규모 사용자를 처리하려면 서버 확장(Scaling)이 필수적.

### **Kurento vs WebRTC 요약**

| **기능**          | **WebRTC**        | **Kurento**                        |
| ----------------- | ----------------- | ---------------------------------- |
| **기본 아키텍처** | P2P               | 서버 기반                          |
| **미디어 처리**   | 없음              | 실시간 처리(필터, 변환 등)         |
| **멀티파티**      | 추가 서버 필요    | 기본 제공                          |
| **녹화 기능**     | 없음              | 제공                               |
| **방송**          | 제한적            | 다양한 프로토콜 지원(RTMP, HLS 등) |
| **확장성**        | 클라이언트 의존적 | 중앙 서버 관리                     |
| **고급 기능**     | 제한적            | 얼굴 인식, 모션 감지 등 가능       |
