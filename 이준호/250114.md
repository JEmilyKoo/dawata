# Docker & Docker Compose

## 1. Docker란?
Docker는 애플리케이션을 컨테이너로 패키징하고 배포 및 실행하기 위한 플랫폼입니다. 컨테이너는 애플리케이션과 그 실행 환경을 격리하여 어디서나 동일한 방식으로 실행되도록 보장합니다.

### 주요 특징
- **경량화:** 컨테이너는 가상머신보다 가볍고 빠름.
- **이식성:** 운영체제와 무관하게 동일한 컨테이너 실행 가능.
- **효율성:** 호스트 시스템의 리소스를 효율적으로 사용.

---

## 2. Docker 주요 개념

### 2.1. 이미지 (Image)
컨테이너를 실행하기 위한 읽기 전용 템플릿. 애플리케이션과 필요한 의존성을 포함합니다.

### 2.2. 컨테이너 (Container)
이미지를 기반으로 실행되는 독립된 환경. 컨테이너는 애플리케이션 실행 환경을 제공합니다.

### 2.3. Dockerfile
이미지를 생성하기 위한 설정 파일. Dockerfile에는 이미지 빌드 과정을 명시합니다.

```dockerfile
# 예제 Dockerfile
FROM openjdk:11-jre-slim
WORKDIR /app
COPY target/my-app.jar app.jar
CMD ["java", "-jar", "app.jar"]
```

### 2.4. Docker Hub
Docker 이미지를 공유하고 저장할 수 있는 저장소.

---

## 3. Docker 명령어

### 3.1. 이미지 관련 명령어
- `docker build`: Dockerfile을 기반으로 이미지를 빌드.
- `docker images`: 로컬에 저장된 이미지 목록 확인.
- `docker rmi`: 이미지를 삭제.

### 3.2. 컨테이너 관련 명령어
- `docker run`: 컨테이너 생성 및 실행.
- `docker ps`: 실행 중인 컨테이너 목록 확인.
- `docker stop`: 실행 중인 컨테이너 정지.
- `docker rm`: 컨테이너 삭제.

### 3.3. 기타 명령어
- `docker pull`: Docker Hub에서 이미지 다운로드.
- `docker push`: 이미지를 Docker Hub에 업로드.

---

## 4. Docker Compose란?
Docker Compose는 여러 컨테이너를 정의하고 동시에 실행할 수 있도록 도와주는 도구입니다. 주로 `docker-compose.yml` 파일을 사용하여 애플리케이션 스택을 정의합니다.

### 주요 특징
- **멀티 컨테이너 지원:** 복잡한 애플리케이션 스택 구성 가능.
- **코드 기반 설정:** YAML 파일을 사용하여 설정 관리.
- **간단한 명령어:** `docker-compose up`과 같은 명령어로 컨테이너 관리.

---

## 5. Docker Compose 주요 개념

### 5.1. `docker-compose.yml` 파일 구조
```yaml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "8080:8080"
    volumes:
      - ./app:/app
    environment:
      - SPRING_PROFILES_ACTIVE=dev
  db:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: example
    ports:
      - "3306:3306"
```

### 5.2. 주요 구성 요소
- **services:** 컨테이너 정의.
- **build:** Dockerfile을 사용하여 이미지 빌드.
- **ports:** 호스트와 컨테이너의 포트를 연결.
- **volumes:** 호스트와 컨테이너 간 파일 공유.
- **environment:** 환경 변수를 설정.

---

## 6. Docker Compose 명령어
- `docker-compose up`: `docker-compose.yml`을 기반으로 컨테이너 실행.
- `docker-compose down`: 실행 중인 모든 컨테이너 정지 및 네트워크 삭제.
- `docker-compose ps`: 실행 중인 컨테이너 목록 확인.
- `docker-compose logs`: 컨테이너 로그 확인.

---

## 7. 장점과 단점

### Docker의 장점
- 빠르고 경량화된 애플리케이션 배포.
- 플랫폼 독립적 실행.
- 개발 환경과 배포 환경의 일치.

### Docker Compose의 장점
- 복잡한 애플리케이션 스택 관리 간소화.
- 설정 파일 기반 구성으로 협업 용이.

### 단점
- 초기 학습 곡선이 있음.
- 시스템 리소스 과다 사용 가능.

---

## 8. 예제 프로젝트

### 8.1. Spring Boot 애플리케이션 실행
#### Dockerfile
```dockerfile
FROM openjdk:11-jre-slim
WORKDIR /app
COPY target/my-app.jar app.jar
CMD ["java", "-jar", "app.jar"]
```

#### docker-compose.yml
```yaml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "8080:8080"
  db:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: example
    ports:
      - "3306:3306"
```

### 실행 명령어
1. 이미지 빌드: `docker-compose build`
2. 컨테이너 실행: `docker-compose up`
3. 컨테이너 정지: `docker-compose down`

---

## 9. 참고 자료
- [Docker 공식 문서](https://docs.docker.com/)
- [Docker Compose 공식 문서](https://docs.docker.com/compose/)
