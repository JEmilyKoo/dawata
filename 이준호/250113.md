# Spring Boot Multi Module 학습 내용

## 1. Multi Module 프로젝트란?
Spring Boot Multi Module 프로젝트는 하나의 애플리케이션을 여러 모듈로 분리하여 개발하는 방법입니다. 각 모듈은 독립적인 역할을 수행하며, 재사용 가능하고 유지 보수가 용이합니다.

### 주요 특징
- **모듈화:** 기능별로 독립된 모듈로 나누어 코드 관리.
- **재사용성:** 모듈을 다른 프로젝트에서도 활용 가능.
- **의존성 관리:** Maven 또는 Gradle을 통해 의존성 관리.
- **팀 협업:** 팀원 간 역할 분담이 쉬워짐.

---

## 2. 프로젝트 구조
Spring Boot Multi Module 프로젝트는 일반적으로 아래와 같은 구조로 구성됩니다:

```
root-project
├── module-api       # API 모듈 (컨트롤러 등)
├── module-service   # 서비스 로직 모듈
├── module-domain    # 도메인 및 엔티티 모듈
├── module-common    # 공통 유틸리티 모듈
└── pom.xml          # 루트 프로젝트의 Maven 설정 파일
```

### 각 모듈의 역할
- **module-api:** 클라이언트 요청을 처리하는 컨트롤러와 관련된 코드.
- **module-service:** 비즈니스 로직 구현.
- **module-domain:** 데이터 모델 및 JPA 엔티티.
- **module-common:** 공통으로 사용하는 유틸리티, 예외 처리, 상수.

---

## 3. 프로젝트 설정

### 3.1. 루트 프로젝트의 `pom.xml`
```xml
<modules>
    <module>module-domain</module>
    <module>module-common</module>
    <module>module-service</module>
    <module>module-api</module>
</modules>
```

### 3.2. 각 모듈의 `pom.xml`
#### 공통 Dependency 설정 (예: module-domain)
```xml
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-dependencies</artifactId>
            <version>3.0.0</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>
```

#### API 모듈 (module-api)
```xml
<dependencies>
    <dependency>
        <groupId>com.example</groupId>
        <artifactId>module-service</artifactId>
    </dependency>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
</dependencies>
```

---

## 4. 설정 및 실행

### 4.1. `application.yml`
모든 설정은 최상위 프로젝트 또는 개별 모듈의 `resources` 디렉토리 아래에 작성됩니다.

```yaml
server:
  port: 8080

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/multi_module_db
    username: root
    password: password
    driver-class-name: com.mysql.cj.jdbc.Driver
```

### 4.2. 실행 명령어
- 루트 프로젝트 빌드: `mvn clean install`
- 특정 모듈 실행: `mvn spring-boot:run -pl module-api`

---

## 5. 장점과 단점

### 장점
- **모듈화로 인한 코드 분리:** 유지 보수가 쉬움.
- **독립적 빌드:** 특정 모듈만 빌드 가능.
- **재사용 가능:** 다른 프로젝트에서 모듈 재활용.

### 단점
- **복잡성 증가:** 모듈 간 의존성 관리 필요.
- **설정 관리:** 각 모듈별 설정 관리가 필요.

---

## 6. 베스트 프랙티스
- 모듈 간 의존성은 최소화.
- 공통 의존성은 `module-common`에 정의.
- 각 모듈에 단위 테스트를 작성하여 독립적으로 테스트 가능하게 구성.
- CI/CD 파이프라인을 활용하여 모듈 간 빌드와 배포 자동화.

---

## 7. 예제 코드

### 7.1. Controller (module-api)
```java
@RestController
@RequestMapping("/api")
public class UserController {

    private final UserService userService;

    public UserController(UserService userService) {
        this.userService = userService;
    }

    @GetMapping("/users/{id}")
    public ResponseEntity<UserDto> getUser(@PathVariable Long id) {
        return ResponseEntity.ok(userService.getUserById(id));
    }
}
```

### 7.2. Service (module-service)
```java
@Service
public class UserService {

    private final UserRepository userRepository;

    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    public UserDto getUserById(Long id) {
        User user = userRepository.findById(id)
            .orElseThrow(() -> new UserNotFoundException("User not found"));
        return new UserDto(user);
    }
}
```

### 7.3. Domain (module-domain)
```java
@Entity
public class User {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    private String name;
    private String email;

    // Getters and Setters
}
```

---

## 8. 참고 자료
- [Spring Boot 공식 문서](https://spring.io/projects/spring-boot)
- [Maven Multi Module 프로젝트 예제](https://maven.apache.org/guides/getting-started/)


